@prefix : <http://example.org/ontology#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix dcat: <http://www.w3.org/ns/dcat#> .
@prefix dct: <http://purl.org/dc/terms/> .
@prefix prov: <http://www.w3.org/ns/prov#> .
@prefix ex: <http://example.org/> .

# ============================================================================
# Ontology Metadata
# ============================================================================

<http://example.org/ontology> a owl:Ontology ;
    rdfs:label "Data Products Ontology with Governance"@en ;
    rdfs:comment "An ontology for describing data products with provenance and governance metadata using RDF-star for statement-level annotations."@en ;
    dct:created "2026-02-15"^^xsd:date ;
    dct:creator "Data Governance Team"@en ;
    owl:versionInfo "1.0" ;
    owl:imports <http://www.w3.org/ns/dcat#> ,
                <http://purl.org/dc/terms/> ,
                <http://www.w3.org/ns/prov#> .

# ============================================================================
# Classes
# ============================================================================

# Dataset (reuse DCAT)
dcat:Dataset a owl:Class ;
    rdfs:label "Dataset"@en ;
    rdfs:comment "A collection of data, published or curated by a single agent."@en .

# Theme/Category
:Theme a owl:Class ;
    rdfs:label "Theme"@en ;
    rdfs:comment "A thematic category for datasets (e.g., CustomerAnalytics, MortgageRisk)."@en ;
    rdfs:subClassOf dcat:Theme .

# Organization
:Organization a owl:Class ;
    rdfs:label "Organization"@en ;
    rdfs:comment "An organizational unit responsible for data products."@en ;
    rdfs:subClassOf prov:Agent .

# Data Catalog System
:DataCatalogSystem a owl:Class ;
    rdfs:label "Data Catalog System"@en ;
    rdfs:comment "A system used for data cataloging and governance (e.g., Collibra, Alation)."@en ;
    rdfs:subClassOf prov:SoftwareAgent .

# Governance Rule
:GovernanceRule a owl:Class ;
    rdfs:label "Governance Rule"@en ;
    rdfs:comment "A rule applied during data governance processes."@en .

# ETL Activity (reuse PROV-O)
prov:Activity a owl:Class ;
    rdfs:label "Activity"@en ;
    rdfs:comment "An activity representing data extraction, transformation, or loading."@en .

# Statement Metadata (for RDF-star annotations)
:StatementMetadata a owl:Class ;
    rdfs:label "Statement Metadata"@en ;
    rdfs:comment "Metadata about a specific RDF statement, including provenance and quality."@en .

# ============================================================================
# Object Properties
# ============================================================================

# Dataset theme
dcat:theme a owl:ObjectProperty ;
    rdfs:label "theme"@en ;
    rdfs:comment "The theme or category of a dataset."@en ;
    rdfs:domain dcat:Dataset ;
    rdfs:range :Theme .

# Publisher
dct:publisher a owl:ObjectProperty ;
    rdfs:label "publisher"@en ;
    rdfs:comment "The organization responsible for publishing the dataset."@en ;
    rdfs:domain dcat:Dataset ;
    rdfs:range :Organization .

# Provenance: derived from
prov:wasDerivedFrom a owl:ObjectProperty ;
    rdfs:label "was derived from"@en ;
    rdfs:comment "The system or source from which data was derived."@en ;
    rdfs:range :DataCatalogSystem .

# Provenance: generated by
prov:wasGeneratedBy a owl:ObjectProperty ;
    rdfs:label "was generated by"@en ;
    rdfs:comment "The activity that generated this data."@en ;
    rdfs:range prov:Activity .

# Activity used system
prov:used a owl:ObjectProperty ;
    rdfs:label "used"@en ;
    rdfs:comment "The system used by an activity."@en ;
    rdfs:domain prov:Activity ;
    rdfs:range :DataCatalogSystem .

# Governance rule reference
:rule a owl:ObjectProperty ;
    rdfs:label "governance rule"@en ;
    rdfs:comment "The governance rule applied to derive or validate data."@en ;
    rdfs:range :GovernanceRule .

# ============================================================================
# Datatype Properties
# ============================================================================

# Dataset title
dct:title a owl:DatatypeProperty ;
    rdfs:label "title"@en ;
    rdfs:comment "The name of the dataset."@en ;
    rdfs:domain dcat:Dataset ;
    rdfs:range xsd:string .

# Issue date
dct:issued a owl:DatatypeProperty ;
    rdfs:label "issued"@en ;
    rdfs:comment "The date the dataset was issued or published."@en ;
    rdfs:domain dcat:Dataset ;
    rdfs:range xsd:date .

# Creation timestamp
dct:created a owl:DatatypeProperty ;
    rdfs:label "created"@en ;
    rdfs:comment "The creation date of a resource."@en ;
    rdfs:range xsd:dateTime .

# Confidence score (quality metric)
:confidence a owl:DatatypeProperty ;
    rdfs:label "confidence"@en ;
    rdfs:comment "A confidence score (0-1) indicating the quality or reliability of data."@en ;
    rdfs:range xsd:decimal .

# Generation time
prov:generatedAtTime a owl:DatatypeProperty ;
    rdfs:label "generated at time"@en ;
    rdfs:comment "The time at which data was generated."@en ;
    rdfs:range xsd:dateTime .

# Activity start time
prov:startedAtTime a owl:DatatypeProperty ;
    rdfs:label "started at time"@en ;
    rdfs:comment "The time an activity started."@en ;
    rdfs:domain prov:Activity ;
    rdfs:range xsd:dateTime .

# ============================================================================
# Named Individuals (Examples)
# ============================================================================

# Themes
<http://example.org/themes/CustomerAnalytics> a :Theme ;
    rdfs:label "Customer Analytics"@en .

<http://example.org/themes/fibo/MortgageRisk> a :Theme ;
    rdfs:label "Mortgage Risk"@en .

<http://example.org/themes/ProductData> a :Theme ;
    rdfs:label "Product Data"@en .

<http://example.org/themes/SalesAnalytics> a :Theme ;
    rdfs:label "Sales Analytics"@en .

<http://example.org/themes/SupplyChain> a :Theme ;
    rdfs:label "Supply Chain"@en .

# Data Catalog Systems
<http://example.org/system/COLLIBRA> a :DataCatalogSystem ;
    rdfs:label "Collibra"@en ;
    rdfs:comment "Collibra Data Governance platform"@en .

<http://example.org/system/ALATION> a :DataCatalogSystem ;
    rdfs:label "Alation"@en ;
    rdfs:comment "Alation Data Catalog"@en .

<http://example.org/system/INFORMATICA> a :DataCatalogSystem ;
    rdfs:label "Informatica"@en ;
    rdfs:comment "Informatica data management platform"@en .

# Organizations (Publishers)
<http://example.org/org/DataGovernanceTeam> a :Organization ;
    rdfs:label "Data Governance Team"@en .

<http://example.org/org/RiskManagement> a :Organization ;
    rdfs:label "Risk Management"@en .

<http://example.org/org/ProductTeam> a :Organization ;
    rdfs:label "Product Team"@en .

# Governance Rules
<http://example.org/rule/RULE_001> a :GovernanceRule ;
    rdfs:label "Rule 001"@en ;
    rdfs:comment "Automatic theme classification rule"@en .

<http://example.org/rule/RULE_002> a :GovernanceRule ;
    rdfs:label "Rule 002"@en ;
    rdfs:comment "Data quality validation rule"@en .

# ============================================================================
# RDF-star Annotation Properties
# ============================================================================
# These properties are specifically designed to annotate RDF statements

:statementConfidence a owl:AnnotationProperty ;
    rdfs:label "statement confidence"@en ;
    rdfs:comment "Confidence level for a specific RDF statement (RDF-star annotation)."@en ;
    rdfs:range xsd:decimal .

:statementSource a owl:AnnotationProperty ;
    rdfs:label "statement source"@en ;
    rdfs:comment "The source system that asserted a specific statement (RDF-star annotation)."@en .

:statementRule a owl:AnnotationProperty ;
    rdfs:label "statement rule"@en ;
    rdfs:comment "The governance rule that produced this statement (RDF-star annotation)."@en .

# ============================================================================
# Axioms and Constraints
# ============================================================================

# A dataset must have at least one theme
dcat:Dataset rdfs:subClassOf [
    a owl:Restriction ;
    owl:onProperty dcat:theme ;
    owl:minCardinality "1"^^xsd:nonNegativeInteger
] .

# A dataset must have exactly one title
dcat:Dataset rdfs:subClassOf [
    a owl:Restriction ;
    owl:onProperty dct:title ;
    owl:cardinality "1"^^xsd:nonNegativeInteger
] .

# Confidence scores must be between 0 and 1
:confidence rdfs:range [
    a rdfs:Datatype ;
    owl:onDatatype xsd:decimal ;
    owl:withRestrictions (
        [ xsd:minInclusive "0.0"^^xsd:decimal ]
        [ xsd:maxInclusive "1.0"^^xsd:decimal ]
    )
] .

# Activities must have a start time
prov:Activity rdfs:subClassOf [
    a owl:Restriction ;
    owl:onProperty prov:startedAtTime ;
    owl:cardinality "1"^^xsd:nonNegativeInteger
] .

